<!-- Labour Entries -->
<div th:if="${labourEntries != null and !labourEntries.empty}">
    <h6 class="text-primary mb-3"><i class="fas fa-users"></i> Labour Entries</h6>
    <div class="table-responsive mb-4">
        <table class="table table-striped table-hover table-sm">
            <thead class="table-dark">
                <tr>
                    <th>Work Date</th>
                    <th>Employee</th>
                    <th>Shift</th>
                    <th>Hours</th>
                    <th>Cost/Hour</th>
                    <th>Total Cost</th>
                    <th>Description</th>
                    <th>Entry Date</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="entry : ${labourEntries}">
                    <td th:text="${#temporals.format(entry.workDate, 'dd-MM-yyyy')}"></td>
                    <td th:text="${entry.employee.name}"></td>
                    <td>
                        <span class="badge bg-info" th:text="${entry.shift}"></span>
                    </td>
                    <td th:text="${entry.hoursWorked}"></td>
                    <td th:text="'₹' + ${entry.costPerHour}"></td>
                    <td>
                        <strong th:text="'₹' + ${entry.totalCost}"></strong>
                    </td>
                    <td>
                        <small th:text="${entry.description != null ? entry.description : 'N/A'}"></small>
                    </td>
                    <td>
                        <small class="text-muted" th:text="${#temporals.format(entry.entryDate, 'dd-MM-yyyy HH:mm')}"></small>
                    </td>
                    <td>
                        <button type="button" class="btn btn-sm btn-outline-danger" 
                                th:onclick="'deleteEntry(\'expenses\', \'labour\', ' + ${entry.id} + ')'">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- General Expenses -->
<div th:if="${generalEntries != null and !generalEntries.empty}">
    <h6 class="text-success mb-3"><i class="fas fa-receipt"></i> General Expenses</h6>
    <div class="table-responsive mb-4">
        <table class="table table-striped table-hover table-sm">
            <thead class="table-dark">
                <tr>
                    <th>Expense Date</th>
                    <th>Type</th>
                    <th>Amount</th>
                    <th>Description</th>
                    <th>Details</th>
                    <th>Entry Date</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="entry : ${generalEntries}">
                    <td th:text="${#temporals.format(entry.expenseDate, 'dd-MM-yyyy HH:mm')}"></td>
                    <td>
                        <span class="badge" 
                              th:classappend="${entry.expenseType.name() == 'ELECTRICITY' ? 'bg-warning' : 
                                             (entry.expenseType.name() == 'MAINTENANCE' ? 'bg-danger' : 
                                             (entry.expenseType.name() == 'TRANSPORTATION' ? 'bg-info' : 'bg-secondary'))}"
                              th:text="${entry.expenseType.displayName}"></span>
                    </td>
                    <td>
                        <strong th:text="'₹' + ${entry.amount}"></strong>
                    </td>
                    <td>
                        <small th:text="${entry.description != null ? entry.description : 'N/A'}"></small>
                    </td>
                    <td>
                        <small class="text-muted">
                            <span th:if="${entry.expenseType.name() == 'ELECTRICITY' and entry.unitsConsumed != null}" 
                                  th:text="'Units: ' + ${entry.unitsConsumed}"></span>
                            <span th:if="${entry.expenseType.name() == 'LABOUR' and entry.menCount != null}" 
                                  th:text="'Men: ' + ${entry.menCount} + ', Women: ' + ${entry.womenCount}"></span>
                            <span th:if="${entry.expenseType.name() == 'TRANSPORTATION' and entry.fuelQuantity != null}" 
                                  th:text="'Fuel: ' + ${entry.fuelQuantity} + 'L'"></span>
                            <span th:if="${entry.expenseType.name() == 'SPARES' and entry.partName != null}" 
                                  th:text="'Part: ' + ${entry.partName}"></span>
                        </small>
                    </td>
                    <td>
                        <small class="text-muted" th:text="${#temporals.format(entry.entryDate, 'dd-MM-yyyy HH:mm')}"></small>
                    </td>
                    <td>
                        <button type="button" class="btn btn-sm btn-outline-danger" 
                                th:onclick="'deleteEntry(\'expenses\', \'general\', ' + ${entry.id} + ')'">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- No entries message -->
<div th:if="${(labourEntries == null or labourEntries.empty) and (generalEntries == null or generalEntries.empty)}" 
     class="alert alert-info">
    <i class="fas fa-info-circle"></i>
    No expense entries found
    <span th:if="${selectedDate != null}"> for <span th:text="${#temporals.format(selectedDate, 'dd-MM-yyyy')}"></span></span>
    <span th:if="${selectedType != null and !selectedType.empty}"> of type <strong th:text="${selectedType}"></strong></span>.
</div>

<!-- Summary -->
<div th:if="${(labourEntries != null and !labourEntries.empty) or (generalEntries != null and !generalEntries.empty)}" 
     class="mt-3">
    <small class="text-muted">
        <i class="fas fa-info-circle"></i>
        Showing 
        <span th:if="${labourEntries != null}" th:text="${labourEntries.size()} + ' labour'"></span>
        <span th:if="${generalEntries != null and labourEntries != null}">, </span>
        <span th:if="${generalEntries != null}" th:text="${generalEntries.size()} + ' general'"></span>
        expense entries
        <span th:if="${selectedDate != null}"> for <span th:text="${#temporals.format(selectedDate, 'dd-MM-yyyy')}"></span></span>
    </small>
</div>

<!-- No JavaScript needed - deleteEntry function is defined in the main admin page --> 