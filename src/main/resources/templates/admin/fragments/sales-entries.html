<div th:if="${entries != null and !entries.empty}">
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>Date & Time</th>
                    <th>Invoice #</th>
                    <th>Dealer</th>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Price/Unit</th>
                    <th>Tax</th>
                    <th>Total</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="entry : ${entries}">
                    <td th:text="${#temporals.format(entry.saleDate, 'dd-MM-yyyy HH:mm')}"></td>
                    <td>
                        <small class="text-muted" th:text="${entry.invoiceNumber}"></small>
                    </td>
                    <td th:text="${entry.dealer.name}"></td>
                    <td>
                        <span class="badge" 
                              th:classappend="${entry.productType.name() == 'PITH' ? 'bg-success' : (entry.productType.name() == 'FIBER' ? 'bg-warning' : 'bg-primary')}"
                              th:text="${entry.productType.name() == 'PITH' ? (entry.pithType.displayName) : 
                                       (entry.productType.name() == 'FIBER' ? (entry.fiberType.displayName + ' Fiber') : 
                                       (entry.pithType.displayName + ' Block'))}"></span>
                    </td>
                    <td>
                        <span th:if="${entry.productType.name() == 'BLOCK'}" th:text="${entry.blockCount} + ' blocks'"></span>
                        <span th:if="${entry.productType.name() == 'PITH'}" th:text="${entry.quantity} + ' kg'"></span>
                        <span th:if="${entry.productType.name() == 'FIBER'}" th:text="${entry.quantity} + ' bales'"></span>
                    </td>
                    <td th:text="'₹' + ${entry.pricePerUnit}"></td>
                    <td th:text="'₹' + ${entry.taxAmount != null ? entry.taxAmount : 0}"></td>
                    <td>
                        <strong th:text="'₹' + ${entry.totalWithTax != null ? entry.totalWithTax : entry.totalAmount}"></strong>
                    </td>
                    <td>
                        <button type="button" class="btn btn-sm btn-outline-danger me-1" 
                                th:onclick="'deleteEntry(\'sales\', ' + ${entry.id} + ')'">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                        <a th:href="@{/sales/{id}/bill(id=${entry.id})}" class="btn btn-sm btn-outline-info" target="_blank">
                            <i class="fas fa-file-pdf"></i> Bill
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="mt-3">
        <small class="text-muted">
            <i class="fas fa-info-circle"></i>
            Showing <span th:text="${entries.size()}"></span> sales entries
            <span th:if="${selectedDate != null}"> for <span th:text="${#temporals.format(selectedDate, 'dd-MM-yyyy')}"></span></span>
            <span th:if="${selectedProductType != null and !selectedProductType.empty}"> of type <strong th:text="${selectedProductType}"></strong></span>
        </small>
    </div>
</div>
<div th:if="${entries == null or entries.empty}" class="alert alert-info">
    <i class="fas fa-info-circle"></i>
    No sales entries found
    <span th:if="${selectedDate != null}"> for <span th:text="${#temporals.format(selectedDate, 'dd-MM-yyyy')}"></span></span>
    <span th:if="${selectedProductType != null and !selectedProductType.empty}"> of type <strong th:text="${selectedProductType}"></strong></span>.
</div>

<!-- No JavaScript needed - deleteEntry function is defined in the main admin page --> 