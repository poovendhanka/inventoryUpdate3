<div th:if="${entries != null and !entries.empty}">
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>Lorry In Time</th>
                    <th>Supplier</th>
                    <th>CFT</th>
                    <th>Rate per CFT</th>
                    <th>Total Cost</th>
                    <th>Supervisor</th>
                    <th>Vehicle No.</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="entry : ${entries}">
                    <td th:text="${entry.lorryInTime != null ? #temporals.format(entry.lorryInTime, 'dd-MM-yyyy HH:mm') : 'N/A'}"></td>
                    <td th:text="${entry.party.name}"></td>
                    <td th:text="${entry.cft != null ? #numbers.formatDecimal(entry.cft, 1, 2) : 'N/A'}"></td>
                    <td th:text="${entry.processedDetails != null and entry.processedDetails.costPerCft != null ? '₹' + #numbers.formatDecimal(entry.processedDetails.costPerCft, 1, 2) : 'Not Processed'}"></td>
                    <td th:text="${entry.processedDetails != null and entry.processedDetails.totalCost != null ? '₹' + #numbers.formatDecimal(entry.processedDetails.totalCost, 1, 2) : 'Not Processed'}"></td>
                    <td th:text="${entry.supervisorName}"></td>
                    <td th:text="${entry.vehicleNumber}"></td>
                    <td>
                        <span th:if="${entry.accountsProcessed}" class="badge bg-success">Processed</span>
                        <span th:unless="${entry.accountsProcessed}" class="badge bg-warning">Unprocessed</span>
                    </td>
                    <td>
                        <button type="button" 
                                th:class="${entry.accountsProcessed ? 'btn btn-sm btn-outline-secondary' : 'btn btn-sm btn-outline-danger'}"
                                th:disabled="${entry.accountsProcessed}"
                                th:onclick="'deletePurchaseEntry(' + ${entry.id} + ', ' + ${entry.accountsProcessed} + ')'"
                                th:title="${entry.accountsProcessed ? 'Cannot delete processed raw material' : 'Delete this entry'}">
                            <i class="fas fa-trash"></i> 
                            <span th:text="${entry.accountsProcessed ? 'Processed' : 'Delete'}"></span>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="mt-3">
        <small class="text-muted">
            <i class="fas fa-info-circle"></i>
            Showing <span th:text="${entries.size()}"></span> raw material entries
            <span th:if="${selectedDate != null}"> for <span th:text="${#temporals.format(selectedDate, 'dd-MM-yyyy')}"></span></span>
        </small>
    </div>
</div>
<div th:if="${entries == null or entries.empty}" class="alert alert-info">
    <i class="fas fa-info-circle"></i>
    No raw material entries found
    <span th:if="${selectedDate != null}"> for <span th:text="${#temporals.format(selectedDate, 'dd-MM-yyyy')}"></span></span>.
</div>

<!-- No JavaScript needed - deletePurchaseEntry function is defined in the main admin page --> 